table:
  name: orders
  description: Orders table
  source_dir: ./data/orders/

columns:
  - name: order_id
    logical_name: Order ID
    type: INTEGER
    not_null: true

  - name: user_id
    logical_name: User ID
    type: INTEGER
    not_null: true

  - name: amount
    logical_name: Amount
    type: DOUBLE
    not_null: true

  - name: status
    logical_name: Status
    type: VARCHAR
    not_null: true
    allowed_values: ["pending", "shipped", "cancelled"]

table_constraints:
  primary_key:
    columns: [order_id]
  unique: []
  foreign_keys:
    - columns: [user_id]
      references:
        table: users
        columns: [user_id]
  checks:
    - description: Amount must be non-negative
      query: "SELECT COUNT(*) FROM {table} WHERE amount < 0"
      expect_zero: true
  aggregation_checks: []

export:
  partition_by: []
